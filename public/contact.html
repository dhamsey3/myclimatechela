<!doctype html>
<html lang="en">
<head>
  <!-- Google Analytics (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LJZR6VLZK0"></script>
  <script>
    window.dataLayer=window.dataLayer||[];
    function gtag(){dataLayer.push(arguments);}
    gtag('js',new Date());
    gtag('config','G-LJZR6VLZK0');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact — My Climate Definition</title>
  <meta name="description" content="Contact My Climate Definition with questions, ideas, or feedback." />
  <link rel="canonical" href="https://myclimatedefinition.org/contact.html" />

  <!-- Icons / Manifest -->
  <link rel="icon" href="/img/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#00c4cc">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Merriweather:wght@700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="./css/style.css" />

  <!-- Page-local styles for collapsible menu -->
  <style>
    .nav-toggle{
      display:none;
      appearance:none; border:1px solid var(--border); background:#fff; color:#111;
      width:40px; height:40px; border-radius:10px; cursor:pointer;
      align-items:center; justify-content:center; line-height:0;
      transition:transform .06s ease, box-shadow .12s ease, background .15s ease;
    }
    .nav-toggle:hover{ transform:translateY(-1px); box-shadow:0 4px 12px rgba(0,0,0,.06); }
    .nav-toggle .close{ display:none; }
    .nav-toggle.is-open .hamb{ display:none; }
    .nav-toggle.is-open .close{ display:block; }
    @media (max-width: 860px){
      .header-inner{ position:relative; }
      .nav-toggle{ display:inline-flex; }
      .nav{
        position:absolute; top:calc(100% + 8px); right:0;
        background:#fff; border:1px solid var(--border); border-radius:12px;
        box-shadow:var(--shadow);
        padding:.5rem; min-width: 180px;
        display:flex; flex-direction:column; gap:.25rem;
      }
      .nav[aria-hidden="true"]{ display:none; }
      .nav[aria-hidden="false"]{ display:flex; }
      .nav a{ color:#111; padding:.55rem .65rem; border-radius:8px; text-decoration:none; }
      .nav a:hover{ background:#f7f8fa; }
    }
    @media (min-width: 861px){
      .nav{ display:flex !important; position:static; background:transparent; border:0; box-shadow:none; padding:0; flex-direction:row; gap:1rem; }
      .nav a{ padding:.25rem .2rem; }
      .nav-toggle{ display:none !important; }
    }
    .hidepot{ position:absolute; left:-5000px; height:0; overflow:hidden; }
    .success{ color: var(--green, #0a7f3f); }
    .error{ color: var(--red, #b00020); }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="/" aria-label="My Climate Definition">
        <img id="logoImg" class="header-logo-img"
             src="/img/logo.png"
             srcset="/img/logo@2x.png 2x, /img/logo.png 1x"
             alt="My Climate Definition logo" decoding="async" fetchpriority="high">
        <span class="brand-text">My Climate Definition</span>
      </a>

      <!-- Mobile menu button -->
      <button class="nav-toggle" aria-label="Open menu" aria-controls="site-nav" aria-expanded="false">
        <svg class="hamb" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
          <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <svg class="close" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
          <path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <!-- Collapsible nav -->
      <nav id="site-nav" class="nav" aria-hidden="true">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/contact.html" class="active">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="section contact" aria-labelledby="contact-title">
      <h1 id="contact-title" class="section-title">Contact us</h1>
      <p class="lead">Questions, ideas, or feedback? Send us a note — we read every message.</p>

      <!-- FormSubmit-powered contact form -->
      <form class="card" id="contactForm"
            action="https://formsubmit.co/ajax/info@myclimatedefinition.org"
            method="POST" aria-describedby="privacy-note">

        <div class="form-field">
          <label for="name">Your name</label>
          <input id="name" name="name" type="text" autocomplete="name" required>
        </div>

        <div class="form-field">
          <label for="email">Your email</label>
          <input id="email" name="email" type="email" autocomplete="email" required>
        </div>

        <div class="form-field">
          <label for="message">Message</label>
          <textarea id="message" name="message" rows="6" required></textarea>
        </div>

        <!-- Spam honeypot (_honey is recognized by FormSubmit) -->
        <div class="hidepot" aria-hidden="true">
          <label for="_honey">Leave this field empty</label>
          <input id="_honey" name="_honey" type="text" tabindex="-1" autocomplete="off">
        </div>

        <!-- Optional metadata -->
        <input type="hidden" name="_subject" value="New message from My Climate Definition">
        <input type="hidden" name="_replyto" value="">

        <div class="form-field">
          <label>
            <input type="checkbox" name="consent" required>
            I agree to be contacted about this inquiry.
          </label>
        </div>

        <p id="privacy-note" class="muted">We only use your details to respond to your message.</p>

        <div class="form-actions">
          <button class="btn btn-primary" type="submit">Send message</button>
          <span class="muted" id="formStatus" role="status" aria-live="polite"></span>
        </div>
      </form>
    </section>
  </main>

  <footer class="site-footer">
    <!-- (unchanged footer content) -->
    ...
  </footer>

  <!-- JS -->
  <script>
    // Accessible, async FormSubmit submit
    (function () {
      const form = document.getElementById('contactForm');
      const status = document.getElementById('formStatus');
      const replyto = form.querySelector('input[name="_replyto"]');

      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        status.textContent = 'Sending…';

        // Keep _replyto in sync with user email for easier replying
        const emailInput = document.getElementById('email');
        if (replyto && emailInput) replyto.value = emailInput.value;

        // Honeypot check
        const pot = document.getElementById('_honey');
        if (pot && pot.value) {
          status.textContent = '';
          return; // silently drop bots
        }

        const data = new FormData(form);

        try {
          const res = await fetch(form.action, {
            method: 'POST',
            body: data,
            headers: { 'Accept': 'application/json' }
          });

          if (res.ok) {
            form.reset();
            status.classList.remove('error');
            status.classList.add('success');
            status.textContent = 'Thanks! Your message has been sent.';
          } else {
            const out = await res.json().catch(() => ({}));
            const msg = out.message || (out.errors?.map(e => e.message).join(', ')) || 'Something went wrong. Please try again.';
            status.classList.remove('success');
            status.classList.add('error');
            status.textContent = msg;
          }
        } catch {
          status.classList.remove('success');
          status.classList.add('error');
          status.textContent = 'Network error. Please try again.';
        }
      });
    })();
  </script>
  <script src="./js/main.js" defer></script>
</body>
</html>
